"use strict";angular.module("teamModule",["components"]),angular.module("teamModule").config(["$translateProvider","appConfigProvider",function(e,t){e.translations("en",{teamTitle:"Team",crudAddTeam:"Add Team",crudEditTeam:"Edit Team",crudViewTeam:"View Team"}),e.preferredLanguage(t.getLocale())}]),angular.module("teamModule").config(["$stateProvider","$urlRouterProvider",function(e){e.state("app.team.list",{url:"/list",controller:"TeamListCtrl",ncyBreadcrumb:{label:"Team List"},templateProvider:["$templateCache",function(e){return e.get("teamModule/tpl/list.html")}]}).state("app.team.add",{url:"/add",controller:"TeamAddCtrl",ncyBreadcrumb:{label:"Team Add"},templateProvider:["$templateCache",function(e){return e.get("teamModule/tpl/edit.html")}]}).state("app.team.edit",{url:"/edit/{id}",controller:"TeamEditCtrl",ncyBreadcrumb:{label:"Team Edit"},templateProvider:["$templateCache",function(e){return e.get("teamModule/tpl/edit.html")}],resolve:{teamObj:["$stateParams","TeamRepository",function(e,t){return t.get(e.id).then(function(e){return e})}]}}).state("app.team.view",{url:"/{id}",controller:"TeamViewCtrl",ncyBreadcrumb:{label:"Team View"},templateProvider:["$templateCache",function(e){return e.get("teamModule/tpl/view.html")}],resolve:{teamObj:["$stateParams","TeamRepository",function(e,t){return t.get(e.id).then(function(e){return e})}]}})}]),angular.module("teamModule").controller("TeamAddCtrl",["$window","$scope","growl","$filter","$modal","$timeout","$location","TeamRepository","TeamService","appConfig",function(e,t,a,r,o,n,l,m,i){var u=new i,c=r("translate"),d={};t.title=c("crudAddTeam");var s=function(){var e=u.getFormSchema();t.schema=e.schema,t.form=e.form,t.model=angular.copy(d)};t.resetForm=function(){t.model=angular.copy(d)},t.submitForm=function(e,r){if(t.$broadcast("schemaFormValidate"),e.$valid){var o=angular.copy(r);t.submitPromise={promise:m.create(o).then(function(){t.hasFormError=!1,a.success(c("crudCreateSuccess"),{ttl:5e3})},function(e){a.error(c("crudCreateFailure"),{ttl:5e3}),t.hasFormError=!0,t.formError.message=e.statusText,t.formError.raw=e.data}),message:"",backdrop:!1,templateUrl:"application/tpl/loading.button.html",delay:0,minDuration:0}}},s()}]),angular.module("teamModule").controller("TeamEditCtrl",["$scope","$timeout","$modal","growl","$filter","$stateParams","$location","Restangular","TeamRepository","TeamService","teamObj","_",function(e,t,a,r,o,n,l,m,i,u,c,d){var s=new u,p=angular.copy(c.data),f=o("translate");e.title=f("crudEditTeam"),e.hasFormError=!1,e.formError={message:"",raw:{}};var g=function(){var t=s.getFormSchema();e.schema=t.schema,e.form=t.form,e.model=angular.copy(p)};e.resetForm=function(t,r){var o="components/ui/modals/tpl/modalCrudResetForm.html",n="ModalCrudResetFormController",l=a.open({keyboard:"false",templateUrl:o,controller:n,resolve:{resource:function(){return{resource:r}}}});l.result.then(function(t){void 0!==t.action&&("cancelChange"===t.action||"processChange"===t.action&&(e.model=angular.copy(p)))})},e.submitForm=function(t){e.$broadcast("schemaFormValidate"),t.$valid&&(d.extend(c.data,e.model),c.data.put().then(function(){}))},e.submitForm=function(t){e.$broadcast("schemaFormValidate"),t.$valid&&(d.extend(c.data,e.model),e.submitPromise={promise:c.data.put().then(function(){r.success(f("crudUpdateSuccess"),{ttl:5e3})},function(t){r.error(f("crudUpdateFailure"),{ttl:5e3}),e.hasFormError=!0,e.formError.message=t.statusText,e.formError.raw=t.data}),message:"",backdrop:!1,templateUrl:"application/tpl/loading.button.html",delay:0,minDuration:0})},g()}]),angular.module("teamModule").controller("TeamListCtrl",["$scope","$stateParams","$location","$modal","Restangular","TeamRepository","_",function(e,t,a,r,o,n){e.currentPage=1,e.perPage=10,e.meta={};var l=function(){n.getList({page:e.currentPage,per_page:e.perPage}).then(function(t){e.team=t.data,e.meta=t.data.meta,m(t.data.meta)})},m=function(t){if(void 0===e.initialisedPagination){e.initialisedPagination=!0;e.totalItems=parseInt(t.total*t.pages,10),e.totalItems=parseInt(t.total,10),e.perPage=parseInt(t.per_page,10),e.maxSize=5,e.bigCurrentPage=1}};e.setPage=function(t){e.currentPage=t},e.pageChanged=function(){l(!0,{page:e.currentPage,limit:e.perPage})},e["delete"]=function(e){var t="components/ui/modals/tpl/modalCrudDelete.html",a="ModalCrudDeleteController",o=r.open({keyboard:"false",templateUrl:t,controller:a,resolve:{resource:function(){return{resource:e}}}});o.result.then(function(t){void 0!==t.action&&("cancelChange"===t.action||"processChange"===t.action&&n.remove(e).then(function(){l()}))})},l()}]),angular.module("teamModule").controller("TeamCtrl",["$scope","$state","TeamRepository",function(){}]),angular.module("teamModule").controller("TeamViewCtrl",["$scope","$stateParams","$location","$filter","Restangular","TeamRepository","TeamService","teamObj","_",function(e,t,a,r,o,n,l,m,i){var u=new l,c=angular.copy(m.data),d=r("translate");e.title=d("crudViewTeam"),e.hasFormError=!1,e.formError={message:"",raw:{}};var s=function(){var t=u.getFormSchema();e.schema=t.schema,e.form=t.form,e.model=angular.copy(c)};e.submitForm=function(t){e.$broadcast("schemaFormValidate"),t.$valid&&(i.extend(m.data,e.model),m.data.put().then(function(){}))},s()}]),angular.module("teamModule").factory("TeamRepository",["RestFullResponse","AbstractRepository",function(e,t){function a(){t.call(this,e,"team")}return t.extend(a),new a}]),angular.module("teamModule").factory("TeamService",["$rootScope","$q","TeamRepository",function(e,t){return function(){var a=null,r=function(){return{form:["name"],schema:{type:"object",title:"Edit Team",properties:{name:{type:"string",minLength:2,title:"Name",description:""}},required:["name"]}}},o=function(t,r){return a=t,void 0!==r&&e.$broadcast(r,a),a};return{getFormSchema:function(){return r()},setModel:function(e,t){return o(e,t)},getActiveModel:function(){var e=t.defer();return null!==a?e.resolve(a):e.reject({}),e.promise},id:0,restangularObj:{}}}}]).factory("SharedTeamService",["TeamService",function(e){return new e}]);
angular.module("teamModule").run(["$templateCache", function($templateCache) {$templateCache.put("teamModule/tpl/edit.html","<div class=\"container-fluid\">\n	<div class=\"row\">\n		<div class=\"col-lg-12\">\n\n			<h2><a ui-sref=\"^.list\" class=\"btn btn-large btn-default btn-round\">\n				<i class=\"fa fa-angle-left\"></i>\n			</a></h2>\n		</div>\n	</div>\n\n	<div class=\"row\">\n		<div class=\"col-lg-12 bg-content\">\n			<div class=\"row\">\n				<div class=\"col-lg-12\">\n\n					<form  name=\"teamForm\" ng-submit=\"submitForm(teamForm,model)\">\n						<h2>{{ title }}</h2>\n						<div  class=\"form-group\" sf-schema=\"schema\" sf-form=\"form\" sf-model=\"model\"></div>\n						<div class=\"form-group\">\n							<div class=\"col-sm-offset-2 col-sm-10\">\n								<p class=\" pull-right\">\n									<a href=\"javascript:void(0);\" class=\"btn btn-lg btn-round btn-warning\"\n									   ng-click=\"resetForm(teamForm,model)\"><i class=\"fa fa-trash\"></i></a>\n\n									<button type=\"submit\"\n											cg-busy=\"submitPromise\"\n											class=\"btn btn-default btn-round btn-success\"\n											ng-click=\"submit()\"\n											pop=\"{{formError.message}}\"\n											pop-title=\"\"\n											pop-show=\"{{ hasFormError }}\" pop-placement=\"bottom\"\n											>\n										<i class=\"fa fa-check\"><span ></span></i>\n									</button>\n								</p>\n							</div>\n						</div>\n\n					</form>\n				</div>\n				<div class=\"col-lg-12\">\n					<div ng-if=\"hasFormError\">\n						<h4>An error occured</h4>\n						<p>{{formError.message}}</p>\n						<h5>Server returned</h5>\n						<pre>{{formError.raw | json }}</pre>\n					</div>\n				</div>\n			</div>\n\n		</div>\n	</div>\n</div>\n\n\n\n");
$templateCache.put("teamModule/tpl/list.html","<div class=\"row\">\n    <div class=\"col-lg-12\">\n\n        <h2>{{\'teamTitle\'|translate}}<a ui-sref=\"^.add\" href=\"\" class=\"btn btn-default  btn-round btn-warning pull-right\">\n            <i class=\"fa fa-plus\"></i>\n        </a></h2>\n    </div>\n</div>\n<div class=\"row\">\n    <div class=\"col-lg-12\">\n        <div class=\"widget\">\n            <div class=\"widget-header\">\n                <i class=\"fa fa-tasks\"></i><span ncy-breadcrumb-last></span>\n                <input st-search=\"\" type=\"text\" placeholder=\"Search\" class=\"form-control input-sm pull-right\"\n                       ng-if=\"dashboard.userData.config.searchable\"/>\n                <div class=\"clearfix\"></div>\n            </div>\n            <div class=\"widget-body medium no-padding no-height-limit\">\n                <div class=\"table-responsive\">\n                    <table class=\"table\">\n                        <tbody>\n                        <tr ng-repeat=\"team in team\">\n                            <td>\n                                <a ui-sref=\"^.view({id:team.id})\" href=\"\">#{{team.id}} - {{team.name}}</a>\n                                <span class=\"pull-right\">\n                            <a class=\"btn btn-default btn-xs btn-round btn-info\" ui-sref=\"^.edit({id:team.id})\">\n                                <i class=\"fa fa-pencil\"></i>\n                            </a>\n                          <a class=\"btn btn-default btn-xs btn-round btn-warning\" ng-click=\"delete(team)\">\n                              <i class=\"fa fa-trash\"></i>\n                          </a>\n                                </span>\n                            </td>\n                        </tr>\n\n                        </tbody>\n                    </table>\n                    <div class=\"text-center\">\n                        <pagination\n                                ng-model=\"currentPage\"\n                                ng-change=\"pageChanged(page)\"\n                                total-items=\"totalItems\" items-per-page=\"perPage\"\n                                page=\"bigCurrentPage\"\n                                max-size=\"maxSize\" class=\"pagination-md\"\n                                boundary-links=\"true\" rotate=\"true\" num-pages=\"numPages\"\n                                previous-text=\"previous\"\n                                next-text=\"next\"\n                                first-text=\"first\"\n                                last-text=\"last\">\n                        </pagination>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n");
$templateCache.put("teamModule/tpl/main.html","<div ui-view>\n	<div class=\"row\">\n		<div class=\"col-lg-12\">\n			<h2 ncy-breadcrumb-last></h2>\n			<div class=\"breadcrumb-links\">\n				<div ncy-breadcrumb></div>\n			</div>\n		</div>\n	</div>\n</div>\n\n");
$templateCache.put("teamModule/tpl/view.html","<div class=\"container-fluid\">\n	<div class=\"row\">\n		<div class=\"col-lg-12\">\n\n			<h2><a ui-sref=\"^.list\" class=\"btn btn-large btn-default btn-round\">\n				<i class=\"fa fa-angle-left\"></i>\n			</a> <a href=\"/team/edit/{{model.id}}\" class=\"btn btn-default  btn-round btn-warning pull-right\">\n				<i class=\"fa fa-pencil\"></i>\n			</a></h2>\n		</div>\n	</div>\n\n	<div class=\"row\">\n		<div class=\"col-lg-12 bg-content\">\n			<div class=\"row\">\n				<div class=\"col-lg-12\">\n\n					<form name=\"teamForm\" ng-submit=\"submitForm(teamForm,model)\">\n						<h2>{{ title }}</h2>\n\n						<div class=\"form-group\" sf-schema=\"schema\" sf-form=\"form\" sf-model=\"model\"\n							 sf-options=\"{ formDefaults: { readonly: true } }\"></div>\n					</form>\n				</div>\n			</div>\n\n		</div>\n	</div>\n</div>\n");}]);